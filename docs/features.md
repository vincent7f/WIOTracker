# WiFi Tracker 功能说明文档

## 核心功能

### 1. WiFi扫描功能

**功能描述**: 定时扫描周围WiFi网络，查找包含指定关键词的WiFi名称。

**实现细节**:
- 使用 `WifiManager` 获取扫描结果
- 支持部分匹配（忽略大小写）
- 例如：设置关键词"1865"，可以匹配到"WiFi-1865"、"1865-Office"等

**匹配规则**:
- 部分匹配：WiFi名称包含关键词即可
- 忽略大小写：不区分大小写
- 记录匹配到的WiFi全名

### 2. 定时扫描功能

**功能描述**: 在设置的时间范围内，每小时自动扫描一次WiFi。

**配置项**:
- 扫描开始时间：整点时间（0-23）
- 扫描结束时间：整点时间（0-23）
- 默认：8:00 - 20:00

**执行逻辑**:
- WorkManager每小时触发一次
- 检查当前时间是否在设置的时间范围内
- 如果在范围内，执行WiFi扫描
- 如果不在范围内，跳过本次扫描

### 3. 日志记录功能

**功能描述**: 记录所有扫描到匹配WiFi的时间和WiFi名称。

**记录内容**:
- 扫描时间戳
- 匹配到的WiFi全名
- 匹配的关键词

**展示方式**:
- 列表形式展示所有记录
- 按时间倒序排列（最新的在前）
- 显示格式：WiFi名称 + 时间

### 4. 打卡统计功能

**功能描述**: 按月显示日历，统计每天匹配WiFi的次数。

**统计规则**:
- 按日期聚合扫描记录
- 计算每天匹配到的次数
- 超过3次标记为成功（显示绿色背景）

**展示方式**:
- 日历网格视图
- 显示月份和年份
- 每天显示匹配次数
- 成功日期（≥3次）显示绿色背景

## 用户界面

### 1. 设置页面

**功能**:
- 输入WiFi名称（关键词）
- 选择扫描开始时间（整点）
- 选择扫描结束时间（整点）
- 保存设置

**操作流程**:
1. 打开设置页面
2. 输入WiFi名称（例如：1865）
3. 点击开始时间字段，选择开始时间
4. 点击结束时间字段，选择结束时间
5. 点击保存按钮

### 2. 日志页面

**功能**:
- 显示所有扫描记录
- 按时间倒序排列

**展示内容**:
- WiFi名称（大字体，加粗）
- 扫描时间（小字体，灰色）

### 3. 打卡页面

**功能**:
- 显示当前月份的日历
- 显示每天的匹配次数
- 成功日期（≥3次）显示绿色背景
- 支持切换月份

**操作流程**:
1. 打开打卡页面
2. 查看当前月份的统计
3. 点击左右箭头切换月份
4. 查看每天的匹配次数和成功标记

## 导航结构

应用使用底部导航栏，包含三个主要页面：

1. **打卡** - 日历统计视图（默认页面）
2. **日志** - 扫描记录列表
3. **设置** - 应用配置

## 数据持久化

### 扫描记录

- 存储位置：Room数据库
- 表名：`wifi_scan_records`
- 数据保留：永久保存（除非用户清除数据）

### 应用设置

- 存储位置：SharedPreferences
- 文件名：`wifi_tracker_prefs`
- 设置项：
  - `target_wifi_name`: 目标WiFi名称
  - `scan_start_hour`: 扫描开始时间（小时）
  - `scan_end_hour`: 扫描结束时间（小时）

## 权限说明

### 必需权限

1. **位置权限**（运行时请求）
   - `ACCESS_FINE_LOCATION`
   - `ACCESS_COARSE_LOCATION`
   - 用途：WiFi扫描必需（Android 6.0+）

2. **WiFi权限**（安装时授予）
   - `ACCESS_WIFI_STATE`
   - `CHANGE_WIFI_STATE`
   - 用途：访问和扫描WiFi

3. **通知权限**（Android 13+，运行时请求）
   - `POST_NOTIFICATIONS`
   - 用途：显示通知（如需要）

## 使用场景

### 典型使用场景

1. **办公室打卡**
   - 设置办公室WiFi名称关键词
   - 设置工作时间（例如：9:00-18:00）
   - 应用自动记录到达时间
   - 查看打卡页面确认出勤情况

2. **位置追踪**
   - 设置特定地点WiFi名称
   - 记录到达该地点的时间
   - 查看日志了解访问历史

3. **WiFi监控**
   - 监控特定WiFi网络的出现
   - 记录出现时间和频率
   - 分析网络可用性

## 限制和注意事项

1. **Android版本限制**
   - Android 10+对WiFi扫描有更严格的限制
   - 可能需要用户手动触发扫描

2. **电池优化**
   - 后台任务可能被系统限制
   - 建议关闭应用的电池优化

3. **位置服务**
   - WiFi扫描需要位置权限
   - 可能需要启用位置服务

4. **WiFi状态**
   - 只有在WiFi启用时才能扫描
   - 如果WiFi关闭，扫描会跳过

5. **时间精度**
   - 扫描间隔为1小时
   - 不能精确到分钟级别
